{% extends 'header.html' %}
{% load static %}

{% block head %}
    <link rel="stylesheet" href="{% static 'css/test.css'%}">
    <title>Mide tu riesgo</title>
{% endblock %}
{% block content %}
    <div id="azul"></div>
    <div id="blanco"></div>
    <div id="plomo"></div>
    <div id="head"></div>
    <form action="" method="post">
        {% csrf_token %}
        <div class="inicio">
            Por último realizaremos algunas preguntas sobre el manejo de riesgos en las actividades que realiza la empresa a ser evaluada.
            <div><hr></div>
        </div>
        <div id="explosivos">
            <b>P<c id="exp">{{cont|add:"1"}}</c>.</b> ¿En la empresa para su funcionamiento se utilizan y/o manipulan explosivos?
            <div><br></div>
            {% for explosivo in form_mani_explosivos.is_expo %}
                <div id="div_{{ explosivo.id_for_label }}" class="input-radio">
                    {{ explosivo.tag }}
                    <label for="{{ explosivo.id_for_label }}" class="unselectable">{{ explosivo.choice_label }}</label>
                </div>
            {% endfor %}
            <div><br></div>
            <div><hr></div>
        </div>
        <div id="electricidad">
            <b>P<c id="ele">{{cont|add:"2"}}</c>.</b> ¿En la empresa para su funcionamiento se utilizan y/o manipulan cables de alta tensión y/o electricidad?
            <div><br></div>
            <div class="input-radio" onClick="displayElectricidad()">
                <input type="radio" id="electrisi" name="electrisi" value="electrisi">
                <label for="electrisi" class="unselectable">Sí</label>
            </div>
            <div class="input-radio" onclick="occultElectricidad()">
                <input type="radio" id="electrino" name="electrisi" value="electrino">
                <label for="electrino" class="unselectable">No</label>
            </div>
            <div><br></div><div><hr></div>
        </div>
        <div id="sustancias">
            <b>P<c id="sus">{{cont|add:"3"}}</c>.</b> ¿En la empresa para su funcionamiento se transportan, custodia y/o manipulan corrosivos, inflamables, tóxicos, combustibles?
            <div><br></div>
            <div class="input-radio" onClick="displaySustancias()">
                <input type="radio" id="sustansi" name="sustansi" value="sustansi">
                <label for="sustansi" class="unselectable">Sí</label>
            </div>
            <div class="input-radio" onclick="occultSustancias()">
                <input type="radio" id="sustano" name="sustansi" value="sustano">
                <label for="sustano" class="unselectable">No</label>
            </div><div><br>
        </div>
            <div><hr></div>
        </div>
        <div id="altura">
            <b>P<c id="alt">{{cont|add:"4"}}</c>.</b> ¿En la empresa para su funcionamiento se realizan trabajos en altura?
            <div><br></div>
            <div class="input-radio" onClick="displayAltura()">
                <input type="radio" id="alturasi" name="alturasi" value="alturasi">
                <label for="alturasi" class="unselectable">Sí</label>
            </div>
            <div class="input-radio" onclick="occultAltura()">
                <input type="radio" id="alturano" name="alturasi" value="alturano">
                <label for="alturano" class="unselectable">No</label>
            </div>
            <div><br></div>
            <div><hr></div>
        </div>

        <div class="siguiente">
            <button type="submit" value="Submit" id="next">Terminar</button>
        </div>
        <div><br></div>
        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    </form>
    <script type="text/javascript">
        <!--
        function redirectTo(sUrl) {
            window.location = sUrl
        }
        //-->
    </script>
    <script type="text/javascript">
        {% if form_mani_explosivos.is_expo %}
            var explosivos = 0;
            displayExplosivos();
        {% else %}
            var explosivos = 1;
            occultExplosivos();
        {% endif %}
    document.getElementById("div_id_is_expo_0").onclick = function () {
        displayExplosivos()
    };

    document.getElementById("div_id_is_expo_1").onclick = function () {
        occultExplosivos()
    };

    function displayExplosivos(){
        if(explosivos < 1) {
            var num = document.getElementById('exp').innerHTML;
            explosivos++;
            $('<div id="explosivosNext"><b>P' + num + '-1.</b> Indique todas las actividades que realiza la empresa para disminuir los riesgos con respecto a la manipulación de explosivos<div><br></div>' +
                {% for tipo_explo in form_mani_explosivos.tipos %}
                '<div class="input-radio">{{ tipo_explo.tag }}' +
                '<label for="{{ tipo_explo.id_for_label }}" class="unselectable">{{ tipo_explo.choice_label }}</label></div>' +
                {% endfor %}
                '<div><br></div><div><hr></div></div>').appendTo("#explosivos");
        }
    }

    function occultExplosivos(){
    if(explosivos == 1){
        explosivos--;
        var parent = document.getElementById("explosivos");
        var child = document.getElementById("explosivosNext");
        parent.removeChild(child);
    }
}
    </script>
{% endblock %}