{% extends 'MideTuRiesgo/mideturiesgo-base.html' %}
{% load static %}

{% block head %}
    <link rel="stylesheet" href="{% static 'css/test.css'%}">
    <title>Mide tu riesgo</title>
{% endblock %}
{% block content %}
    <div class="inicio">
        Las siguientes preguntas están relacionadas con la implementación y manejo de riesgos de la empresa
        <div><hr></div>
    </div>
    <form action="" method="post">
        {% csrf_token %}
        <div class="inicio">
            <b>{{cont|add:"1"}}.</b> Indique todos los elementos de manejo de riesgo con los que cuenta la empresa a ser evaluada
            <div><br></div>
            {% for manejo_riesgo in form_man_riesgo.opciones_manejo %}
                {% if manejo_riesgo.id_for_label == "id_opciones_manejo_2" %}
                    <div class="input-radio" onclick="blockOptions()">
                        {{ manejo_riesgo.tag }}
                        <label for="{{ manejo_riesgo.id_for_label }}" class="unselectable">{{ manejo_riesgo.choice_label }}</label>
                    </div>
                {% else %}
                    <div class="input-radio" onclick="unblockOptions()">
                        {{ manejo_riesgo.tag }}
                        <label for="{{ manejo_riesgo.id_for_label }}" class="unselectable">{{ manejo_riesgo.choice_label }}</label>
                    </div>
                {% endif %}
            {% endfor %}
            <div><hr></div>
        </div>

        <div class="inicio">
            <b>{{cont|add:"2"}}.</b> La empresa cuenta con prevencionista de riesgos
            {% for t_preven in form_preven_empresa.opciones_prevencionista_t %}
                <div class="input-radio">
                    {% if t_preven.choice_label != "---------" %}
                        {{ t_preven.tag }}
                        <label for="{{ t_preven.id_for_label }}" class="unselectable">{{ t_preven.choice_label }}</label>
                    {% endif %}
                </div>
            {% endfor %}
            <div><hr></div>
            <div style="text-align: center" class="navButtons">
            <div class="boton">
                <input type="button" id="previous" onclick="history.go(-1)" value="Anterior">
            </div>
            <div class="boton">
                <button type="submit" value="Submit" id="next">Siguiente</button>
            </div>
        </div>
        </div>
        <div class="pagina">
            Página 3/4
        </div>
    </form>
    <div><br></div>

    <script type="text/javascript">
        <!--
        function redirectTo(sUrl) {
            window.location = sUrl
        }
        //-->
    </script>
    <script type="text/javascript">
        var checkbox = $('[id="id_opciones_manejo_2"]');
        if (checkbox.is(':checked')){
            document.getElementById("id_opciones_prevencionista_t_1").disabled = true;
            document.getElementById("id_opciones_prevencionista_t_2").disabled = true;
            document.getElementById("id_opciones_prevencionista_t_3").disabled = true;
            document.getElementById("id_opciones_prevencionista_t_4").disabled = true;
            document.getElementById("id_opciones_prevencionista_t_4").checked = true;
        }else{
            document.getElementById("id_opciones_prevencionista_t_1").disabled = false;
            document.getElementById("id_opciones_prevencionista_t_2").disabled = false;
            document.getElementById("id_opciones_prevencionista_t_3").disabled = false;
            document.getElementById("id_opciones_prevencionista_t_4").disabled = false;
        }
        function blockOptions(){
            document.getElementById("id_opciones_prevencionista_t_1").disabled = true;
            document.getElementById("id_opciones_prevencionista_t_2").disabled = true;
            document.getElementById("id_opciones_prevencionista_t_3").disabled = true;
            document.getElementById("id_opciones_prevencionista_t_4").disabled = true;
            document.getElementById("id_opciones_prevencionista_t_4").checked = true;
        }
        function unblockOptions(){
            document.getElementById("id_opciones_prevencionista_t_1").disabled = false;
            document.getElementById("id_opciones_prevencionista_t_2").disabled = false;
            document.getElementById("id_opciones_prevencionista_t_3").disabled = false;
            document.getElementById("id_opciones_prevencionista_t_4").disabled = false;
        }
    </script>
{% endblock %}